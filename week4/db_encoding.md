# 데이터베이스 인코딩



### 1. 필요성

1. **최적화와 성능**

   UTF-8과 같은 일반적인 인코딩은 범용적이지만 각 데이터베이스가 지원하는 기능과 데이터 타입에 맞게 사용하기에는 호환성이 떨어진다.  데이터베이스 전용 인코딩은 성능 최적화를 목적으로 설계되었으며 저장 공간을 줄이거나 쿼리 성능을 향상시키는 데 중점을 둔다. 예를 들어, 특정 언어만 사용하는 시스템에서는 불필요한 문자셋을 제외하고 최적화된 인코딩을 선택하여 성능을 개선할 수 있다.

   

2. **지역화 및 특정 요구사항 대응**

   특정 언어 또는 문화권에 특화된 정렬 규칙(Collation)과 데이터 처리 방식을 지원하기 위해 데이터베이스 전용 인코딩을 사용한다. 예를 들어, 중국어나 일본어에서는 복잡한 문자 처리나 음절 비교가 필요하기 때문에 이를 지원하는 전용 인코딩을 사용한다.

-> 데이터 호환성, 변환 효율, 외부 라이브러리 의존성 최소화 등을 위해 별도의 프로토콜을 만듬.



### 2. 종류

1. MySQL
   - **`utf8mb4`**: MySQL에서 사용하는 4바이트 UTF-8 인코딩으로, 이모지와 같은 확장된 유니코드 문자를 지원한다.
   - **`ucs2`**: 고정 길이 2바이트 유니코드 인코딩으로, 빠른 정렬 및 비교 연산을 제공한다. `utf16`과 유사하지만 MySQL에서 사용되는 전용 방식이다.
2. PostgreSQL
   - **`SQL_ASCII`**: 기본적으로 ASCII 문자 집합만 지원하며, 유니코드나 다른 문자 집합을 사용하지 않는다. 처리 속도가 빠른 대신 유니코드 호환성이 부족하기 때문에 주로 과거 시스템과의 호환을 위해 사용된다.
3. Oracle
   - **`AL32UTF8`**: UTF-8 인코딩 방식 기반으로 유니코드 표준을 지원한다. 이를 통해 다국어 데이터 처리를 효율적으로 수행할 수 있다.
   - **`WE8ISO8859P1`**: 서유럽 언어를 위한 ISO-8859-1 기반 인코딩이다.
   - **`ZHS16GBK`**: 중국어 문자 집합인 GBK 인코딩을 지원하는 Oracle 전용 인코딩이다.
4. SQL Server
   - **`Latin1_General_CI_AS`**: 서유럽 언어를 위한 ISO-8859-1 인코딩이지만, SQL Server에서만 사용하는 로케일 기반의 인코딩 방식이다. 대소문자를 구분하지 않고, 악센트 구별 여부를 지원한다.
   - **`KOI8-R`**: 러시아어를 위한 인코딩 방식으로, SQL Server에서만 사용되는 전용 인코딩이다.

### 3. 장점

1. **공간 최적화**

   데이터베이스 전용 인코딩은 저장 공간을 절약하기 위해 특정 데이터 타입에 최적화되어 있다. 예를 들어, 숫자나 날짜 같은 타입은 범용 인코딩보다 더 적은 비트 수로 저장할 수 있어, 더 많은 데이터를 효율적으로 저장할 수 있다.

2. **속도 최적화**

   전용 인코딩은 데이터베이스에서 자주 사용하는 쿼리와 작업에 맞게 설계되어, 데이터 액세스와 처리가 더 빠르다. 범용 인코딩은 다양한 데이터 형식을 지원하는 데 중점을 두지만, 데이터베이스 전용 인코딩은 특정 작업에 최적화되어 성능을 높인다.

3. **유효성 검사 용이성**

   데이터베이스 전용 인코딩은 저장되는 데이터의 유효성 검사를 단순화한다. 예를 들어, 문자열 길이나 형식, 숫자의 범위 등을 인코딩 수준에서 관리할 수 있어 데이터 무결성 유지가 용이하다.

4. **쿼리 성능 향상**

   인덱스와 결합된 데이터베이스 전용 인코딩은 데이터 검색 성능을 향상시킨다. 범용 인코딩은 데이터 구조가 복잡하여 인덱싱과 쿼리 최적화에 어려움을 줄 수 있지만, 전용 인코딩은 이를 더 간단하고 효율적으로 처리한다.

------

**참고 자료**

- https://stackoverflow.com/questions/60440117/why-encoding-needed-in-database
- https://www.geeksforgeeks.org/introduction-to-mysql-character-encoding/